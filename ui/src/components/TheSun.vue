<template>
  <svg id="sun" ref="sun" viewBox="0 0 497 497" width="512" height="512" xmlns="http://www.w3.org/2000/svg">
    <!-- Le sun -->
    <circle fill="#ffd900" cx="248.5" cy="248.5" r="149.1"/>
    <!-- Sun shading -->
    <path fill="#fb0" d="m248.5 99.4c-3.87 0-7.705.148-11.5.437 76.972 5.871 137.6 70.187 137.6 148.663s-60.628 142.792-137.6 148.663c3.795.289 7.63.438 11.5.438 82.346 0 149.1-66.754 149.1-149.1s-66.754-149.101-149.1-149.101z"/>

<!--    <g fill="#fb0">-->
<!--      <path d="m231.933 49.7c0 9.149 7.417 16.567 16.567 16.567 9.149 0 16.567-7.417 16.567-16.567v-33.133c0-9.15-7.418-16.567-16.567-16.567-9.15 0-16.567 7.417-16.567 16.567z"/>-->
<!--      <path d="m231.933 480.433c0 9.15 7.417 16.567 16.567 16.567 9.149 0 16.567-7.417 16.567-16.567v-33.133c0-9.149-7.417-16.567-16.567-16.567s-16.567 7.417-16.567 16.567z"/>-->
<!--      <path d="m447.3 231.933c-9.149 0-16.567 7.417-16.567 16.567s7.417 16.567 16.567 16.567h33.133c9.15 0 16.567-7.417 16.567-16.567s-7.417-16.567-16.567-16.567z"/>-->
<!--      <path d="m16.567 231.933c-9.15 0-16.567 7.417-16.567 16.567s7.417 16.567 16.567 16.567h33.133c9.149 0 16.567-7.417 16.567-16.567s-7.417-16.567-16.567-16.567z"/>-->
<!--      <path d="m377.358 96.213c-6.47 6.47-6.47 16.959 0 23.429s16.959 6.47 23.429 0l23.429-23.429c6.47-6.47 6.47-16.959 0-23.429s-16.959-6.47-23.429 0z"/>-->
<!--      <path d="m72.784 400.787c-6.47 6.47-6.47 16.959 0 23.429s16.959 6.47 23.429 0l23.429-23.429c6.47-6.47 6.47-16.959 0-23.429s-16.959-6.47-23.429 0z"/>-->
<!--      <path d="m400.787 377.358c-6.47-6.47-16.959-6.47-23.429 0s-6.47 16.959 0 23.429l23.429 23.429c6.47 6.47 16.959 6.47 23.429 0s6.47-16.959 0-23.429z"/>-->
<!--      <path d="m96.213 72.784c-6.47-6.47-16.959-6.47-23.429 0s-6.47 16.959 0 23.429l23.429 23.429c6.47 6.47 16.959 6.47 23.429 0s6.47-16.959 0-23.429z"/>-->
<!--    </g>-->
    <g fill="#ffa400" class="transish">
      <path d="m172.427 72.343c-2.943 0-5.736-1.743-6.932-4.632l-6.34-15.306c-1.585-3.827.232-8.214 4.059-9.799 3.827-1.583 8.214.231 9.799 4.059l6.34 15.306c1.585 3.827-.232 8.214-4.059 9.799-.938.388-1.91.573-2.867.573z"/>
      <path d="m330.922 454.983c-2.943 0-5.735-1.743-6.932-4.632l-6.34-15.306c-1.586-3.827.231-8.214 4.059-9.799 3.827-1.586 8.214.231 9.799 4.059l6.34 15.306c1.586 3.827-.231 8.214-4.059 9.799-.938.389-1.911.573-2.867.573z"/>
      <path d="m64.843 179.944c-.957 0-1.929-.184-2.867-.573l-15.306-6.34c-3.827-1.585-5.644-5.972-4.059-9.799s5.974-5.647 9.799-4.059l15.306 6.34c3.827 1.585 5.644 5.972 4.059 9.799-1.196 2.888-3.989 4.632-6.932 4.632z"/>
      <path d="m447.483 338.44c-.957 0-1.929-.184-2.867-.573l-15.306-6.34c-3.827-1.585-5.645-5.972-4.058-9.799 1.586-3.826 5.975-5.646 9.799-4.059l15.306 6.34c3.827 1.585 5.645 5.972 4.059 9.799-1.197 2.887-3.989 4.632-6.933 4.632z"/>
      <path d="m49.56 338.44c-2.943 0-5.736-1.743-6.932-4.632-1.585-3.827.233-8.214 4.059-9.799l15.306-6.34c3.826-1.584 8.214.231 9.799 4.059 1.585 3.827-.232 8.214-4.059 9.799l-15.306 6.34c-.938.388-1.91.573-2.867.573z"/>
      <path d="m432.2 179.944c-2.943 0-5.735-1.743-6.932-4.632-1.586-3.827.231-8.214 4.059-9.799l15.306-6.34c3.826-1.585 8.214.232 9.799 4.059 1.586 3.827-.231 8.214-4.059 9.799l-15.306 6.34c-.938.389-1.911.573-2.867.573z"/>
      <path d="m166.121 454.983c-.956 0-1.929-.184-2.867-.573-3.827-1.585-5.644-5.972-4.059-9.799l6.34-15.306c1.584-3.826 5.973-5.647 9.799-4.059 3.827 1.585 5.644 5.972 4.059 9.799l-6.34 15.306c-1.196 2.888-3.989 4.632-6.932 4.632z"/>
      <path d="m324.616 72.343c-.957 0-1.929-.184-2.867-.573-3.827-1.585-5.645-5.972-4.059-9.799l6.34-15.306c1.586-3.826 5.976-5.646 9.799-4.059 3.827 1.585 5.645 5.972 4.059 9.799l-6.34 15.306c-1.196 2.888-3.988 4.632-6.932 4.632z"/>
      <animateTransform attributeName="transform"
                        attributeType="XML"
                        type="rotate"
                        values="0;7200;0"
                        dur="480s"
                        repeatCount="indefinite"/>
    </g>

    <g :transform="`rotate(${rotation})`" class="transish" v-if="!demo">
      <!-- arrow -->
      <path fill="#ffd900" transform="translate(0 1) scale(0.3 0.3)" d="m1635.35393,777.85464l-206.85734,-187.908c-9.55306,-8.684 -19.17847,-13.28 -27.17904,-13.28c-15.46758,0 -25.03571,16.472 -25.03571,44.044l0,406.124c0,27.54 9.55607,43.98 24.98747,43.98c8.01263,0 17.4843,-4.6 27.05846,-13.308l206.9538,-187.904c13.30917,-12.104 20.6797,-28.392 20.6797,-45.884c0.00301,-17.48 -7.28311,-33.764 -20.60736,-45.864z"/>
    </g>
  </svg>
</template>
<script>
export default {
  props: ['day', 'demo'],
  data() {
    return {
      rotation: this.day * -60
    }
  },
  watch: {
    day() {
      this.rotation = this.day * -60
    }
  },
  beforeMount() {
    // prevent animations from going bananas after being in background for a while
    window.addEventListener('focus', this.unpause)
    window.addEventListener('blur', this.pause)
  },
  beforeUnmount() {
    window.removeEventListener('focus', this.unpause)
    window.removeEventListener('blur', this.pause)
  },
  methods: {
    pause() {
      this.$refs.sun.pauseAnimations()
    },
    unpause() {
      this.$refs.sun.unpauseAnimations()
    }
  }
}
</script>
<style scoped>
#sun {
  /*pointer-events: none;*/
}
.transish {
  transform-origin: center;
  transition: all 0.5s ease-in-out;
}
</style>
